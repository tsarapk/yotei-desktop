<UserControl xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:YoteiTasks.ViewModels"
        xmlns:yotei="clr-namespace:YoteiLib.Core;assembly=Core"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="600"
        x:Class="YoteiTasks.Views.TaskEditorView"
        x:DataType="vm:TaskEditorViewModel"
        Background="#141414">
    <ScrollViewer>
        <StackPanel Margin="20" Spacing="15">
            
            <TextBox x:Name="TitleTextBox" 
                     Text="{Binding Title, Mode=TwoWay}"
                     IsReadOnly="{Binding IsReadOnly}" />
            
            <TextBlock Text="Приоритет (0-10):" Foreground="White" />
            <NumericUpDown x:Name="PriorityNumericUpDown" 
                           Minimum="0" 
                           Maximum="10" 
                           Value="{Binding Priority}"
                           IsEnabled="{Binding !IsReadOnly}" />
            
            <TextBlock Text="Статус:" Foreground="White" />
            <ComboBox x:Name="StatusComboBox" 
                      SelectedItem="{Binding SelectedStatus}"
                      IsEnabled="{Binding !IsReadOnly}">
                <ComboBox.Items>
                    <x:Static Member="yotei:TaskStatus.InProgress" />
                    <x:Static Member="yotei:TaskStatus.Queued" />
                    <x:Static Member="yotei:TaskStatus.Canceled" />
                </ComboBox.Items>
            </ComboBox>
            
           
            
            <TextBlock Text="Описание:" Foreground="White" />
            <TextBox x:Name="PayloadTextBox" 
                     Text="{Binding Payload}"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     Height="100"
                     IsReadOnly="{Binding IsReadOnly}" />
            
            <TextBlock Text="Дедлайн:" Foreground="White" />
            <DatePicker x:Name="DeadlineDatePicker" 
                        SelectedDate="{Binding Deadline}"
                        IsEnabled="{Binding !IsReadOnly}" />
            
            <TextBlock Text="Исполнитель:" Foreground="White" />
            <ComboBox x:Name="ActorComboBox" 
                     ItemsSource="{Binding AvailableActors}"
                     SelectedItem="{Binding SelectedActor}"
                     IsEnabled="{Binding !IsReadOnly}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}" />
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>
            
            <TextBlock Text="Добавить связь с:" Foreground="White" />
            <Grid ColumnDefinitions="*,Auto">
                <ComboBox x:Name="RelationComboBox" 
                         Grid.Column="0"
                         ItemsSource="{Binding AvailableNodes}"
                         SelectedItem="{Binding SelectedRelationNode}"
                         IsEnabled="{Binding !IsReadOnly}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Label}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
               
            </Grid>
            <Button Content="Добавить связь" 
                    Command="{Binding AddRelationCommand}"
                    HorizontalAlignment="Right"
                    IsEnabled="{Binding !IsReadOnly}" />
            
            <Button x:Name="CompleteButton" 
                    Content="{Binding CompleteButtonText}"
                    Command="{Binding CompleteTaskCommand}"
                    Margin="0,10,0,0"
                    IsEnabled="{Binding !IsReadOnly}" />
            
        </StackPanel>
    </ScrollViewer>
</UserControl>

